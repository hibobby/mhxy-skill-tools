# 修复说明

## 问题
遇到错误：`The requested module does not provide an export named 'Database'`

## 解决方案

### 1. 已修复导入方式
已将 `src/lib/db.ts` 中的导入从：
```typescript
import { Database } from '@tauri-apps/plugin-sql'
```
改为：
```typescript
import Database from '@tauri-apps/plugin-sql'
```

### 2. 清理 Vite 缓存
如果修复后仍有问题，请清理 Vite 缓存：

**Windows (PowerShell):**
```powershell
Remove-Item -Recurse -Force node_modules\.vite
npm run dev
```

**Linux/Mac:**
```bash
rm -rf node_modules/.vite
npm run dev
```

### 3. 重新安装依赖（如果仍有问题）
```bash
rm -rf node_modules package-lock.json
npm install
npm run dev
```

### 4. 确认插件已正确安装
确保 `package.json` 中包含：
```json
"@tauri-apps/plugin-sql": "^2.0.0"
```

如果版本不对，运行：
```bash
npm install @tauri-apps/plugin-sql@^2.0.0
```

### 5. 确认 Tauri 配置
确保 `src-tauri/Cargo.toml` 中包含：
```toml
[dependencies]
tauri-plugin-sql = { version = "2.0", features = ["sqlite"] }
```

确保 `src-tauri/tauri.conf.json` 中包含：
```json
"plugins": {
  "sql": {
    "preload": ["sqlite:mhxy.db"]
  }
}
```

## 测试
修复后，重启开发服务器：
```bash
npm run dev
```

如果使用桌面应用：
```bash
npm run tauri dev
```

